document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("form").forEach(function(t){t.addEventListener("submit",function(){t.querySelectorAll(".ignore_form").forEach(function(e){e.disabled=!0})})});const i=document.querySelectorAll("[data-tab]"),f=document.querySelectorAll("[data-for-tab]");function d(t){i.forEach(e=>{e.classList.toggle("active",e.dataset.tab===t)}),f.forEach(e=>{e.classList.toggle("active",e.dataset.forTab===t)})}if(i){i.forEach(e=>{e.addEventListener("click",()=>{d(e.dataset.tab)})});const t=document.querySelector("[data-tab].active");t&&d(t.dataset.tab)}document.querySelectorAll(".input-list-search").forEach(t=>{const e=t.querySelector("input"),a=t.querySelector(".custom-list"),n=e.dataset.url,c=r=>{a.innerHTML="",Array.isArray(r)&&r.forEach(o=>{const s=document.createElement("li");s.textContent=o.text,s.addEventListener("click",()=>{e.value=o.id,a.classList.add("hide")}),a.appendChild(s)})},l=()=>{const r=e.value.trim().toLowerCase();let o=!1;if(n){if(r.length<1)return;axios.get(n,{params:{q:r}}).then(s=>{c(s.data.items),a.classList.remove("hide")}).catch(s=>{console.error("AJAX error:",s)})}else a.querySelectorAll("li").forEach(s=>{const u=s.textContent.toLowerCase().includes(r);s.style.display=u?"block":"none",u&&(o=!0)}),r&&o&&a.classList.remove("hide")};e.addEventListener("focus",()=>{a.classList.remove("hide"),l()}),e.addEventListener("input",l),a.querySelectorAll("li").forEach(r=>{r.addEventListener("click",()=>{e.value=r.textContent,a.classList.add("hide")})}),document.addEventListener("click",r=>{t.contains(r.target)||a.classList.add("hide")})}),document.querySelectorAll(".tag-select").forEach(t=>{new Choices(t,{removeItemButton:!0,placeholderValue:"Виберіть або введіть...",searchPlaceholderValue:"Пошук...",duplicateItemsAllowed:!1})}),document.querySelectorAll(".image-upload").forEach(t=>{const e=t.querySelector('input[type="file"]'),a=t.querySelector("img");e.addEventListener("change",n=>{const c=n.target.files[0];if(c&&c.type.startsWith("image/")){const l=new FileReader;l.onload=function(r){a.src=r.target.result,a.style.display="block"},l.readAsDataURL(c)}else a.src="",a.style.display="none",alert("Будь ласка, виберіть зображення (JPEG, PNG, WEBP...)")})})});
